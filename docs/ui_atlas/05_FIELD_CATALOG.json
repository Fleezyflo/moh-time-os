{
  "_meta": {
    "version": "1.0",
    "generated_at": "2026-02-04T17:15:00Z",
    "database": "data/state.db",
    "description": "Exhaustive field catalog for UI design"
  },
  "fields": [
    {
      "canonical_field": "clients.id",
      "source_table": "clients",
      "type": "TEXT",
      "semantic_type": "uuid",
      "meaning": "Unique client identifier",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": ["client_id"],
      "produced_by": ["xero_collector", "manual"],
      "consumed_by": ["all_modules"],
      "freshness": "static",
      "quality_risks": "Orphan records if deleted",
      "example_values": ["cl_gmg_001", "cl_gargash_002"]
    },
    {
      "canonical_field": "clients.name",
      "source_table": "clients",
      "type": "TEXT",
      "semantic_type": "display_name",
      "meaning": "Client display name",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": ["client_name"],
      "produced_by": ["xero_collector", "manual"],
      "consumed_by": ["ui_display", "search"],
      "freshness": "on_sync",
      "quality_risks": "Inconsistent naming across sources",
      "example_values": ["GMG Consumer LLC", "Gargash Enterprises L.L.C"]
    },
    {
      "canonical_field": "clients.tier",
      "source_table": "clients",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Client VIP tier for prioritization",
      "allowed_values": ["A", "B", "C"],
      "nullability": "NULL",
      "default": "C",
      "aliases": [],
      "produced_by": ["manual"],
      "consumed_by": ["priority_engine", "mode_weights"],
      "freshness": "static",
      "quality_risks": "May not be set for all clients",
      "example_values": ["A", "B", "C"]
    },
    {
      "canonical_field": "clients.health_score",
      "source_table": "clients",
      "type": "REAL",
      "semantic_type": "score_0_100",
      "meaning": "Computed client health score",
      "allowed_values": "0.0 to 100.0",
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["health_scoring_engine"],
      "consumed_by": ["client360", "tiles", "sorting"],
      "freshness": "per_cycle",
      "quality_risks": "May be null if not enough data",
      "example_values": [85.5, 62.0, 30.2]
    },
    {
      "canonical_field": "clients.financial_ar_outstanding",
      "source_table": "clients",
      "type": "REAL",
      "semantic_type": "currency_aed",
      "meaning": "Total outstanding AR from Xero",
      "allowed_values": ">= 0",
      "nullability": "NULL",
      "default": null,
      "aliases": ["ar_outstanding", "ar_total"],
      "produced_by": ["xero_collector"],
      "consumed_by": ["cash_ar_command", "tiles"],
      "freshness": "every_5min",
      "quality_risks": "May lag behind Xero by up to 5 min",
      "example_values": [408000.00, 125000.50, 0.00]
    },
    {
      "canonical_field": "clients.financial_ar_aging",
      "source_table": "clients",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Worst aging bucket for client AR",
      "allowed_values": ["current", "30", "60", "90+"],
      "nullability": "NULL",
      "default": null,
      "aliases": ["ar_aging"],
      "produced_by": ["xero_collector"],
      "consumed_by": ["cash_ar_command", "client360"],
      "freshness": "every_5min",
      "quality_risks": "None",
      "example_values": ["current", "30", "90+"]
    },
    {
      "canonical_field": "clients.relationship_health",
      "source_table": "clients",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Qualitative relationship health",
      "allowed_values": ["excellent", "good", "fair", "poor", "critical"],
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["manual", "health_engine"],
      "consumed_by": ["client360", "alerts"],
      "freshness": "manual_or_computed",
      "quality_risks": "Subjective if manual",
      "example_values": ["good", "fair", "critical"]
    },
    {
      "canonical_field": "clients.relationship_trend",
      "source_table": "clients",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Direction of relationship health",
      "allowed_values": ["improving", "stable", "declining"],
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["health_engine"],
      "consumed_by": ["client360", "trend_indicators"],
      "freshness": "per_cycle",
      "quality_risks": "Requires historical data",
      "example_values": ["stable", "declining"]
    },
    {
      "canonical_field": "clients.xero_contact_id",
      "source_table": "clients",
      "type": "TEXT",
      "semantic_type": "external_id",
      "meaning": "Xero contact ID for linking",
      "allowed_values": null,
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["xero_collector"],
      "consumed_by": ["xero_sync"],
      "freshness": "on_sync",
      "quality_risks": "May be null for manually added clients",
      "example_values": ["xero_contact_abc123"]
    },
    {
      "canonical_field": "brands.id",
      "source_table": "brands",
      "type": "TEXT",
      "semantic_type": "uuid",
      "meaning": "Unique brand identifier",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": ["brand_id"],
      "produced_by": ["manual"],
      "consumed_by": ["projects", "tasks"],
      "freshness": "static",
      "quality_risks": "None",
      "example_values": ["brand_monoprix", "brand_geant"]
    },
    {
      "canonical_field": "brands.client_id",
      "source_table": "brands",
      "type": "TEXT",
      "semantic_type": "fk",
      "meaning": "Parent client",
      "allowed_values": "Valid clients.id",
      "nullability": "NOT NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["manual"],
      "consumed_by": ["normalizer"],
      "freshness": "static",
      "quality_risks": "FK violation if client deleted",
      "example_values": ["cl_gmg_001"]
    },
    {
      "canonical_field": "brands.name",
      "source_table": "brands",
      "type": "TEXT",
      "semantic_type": "display_name",
      "meaning": "Brand display name",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["manual"],
      "consumed_by": ["ui_display"],
      "freshness": "static",
      "quality_risks": "None",
      "example_values": ["Monoprix", "Geant", "Aswaaq"]
    },
    {
      "canonical_field": "projects.id",
      "source_table": "projects",
      "type": "TEXT",
      "semantic_type": "uuid",
      "meaning": "Unique project identifier",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": ["project_id"],
      "produced_by": ["asana_collector", "manual"],
      "consumed_by": ["tasks", "delivery_engine"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["proj_asana_12345", "proj_internal_001"]
    },
    {
      "canonical_field": "projects.brand_id",
      "source_table": "projects",
      "type": "TEXT",
      "semantic_type": "fk",
      "meaning": "Associated brand",
      "allowed_values": "Valid brands.id or NULL",
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["manual", "enrollment_detector"],
      "consumed_by": ["normalizer"],
      "freshness": "on_enrollment",
      "quality_risks": "May be null for unlinked projects",
      "example_values": ["brand_monoprix", null]
    },
    {
      "canonical_field": "projects.client_id",
      "source_table": "projects",
      "type": "TEXT",
      "semantic_type": "fk",
      "meaning": "Associated client (derived from brand)",
      "allowed_values": "Valid clients.id or NULL",
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["normalizer"],
      "consumed_by": ["delivery_engine", "client360"],
      "freshness": "per_cycle",
      "quality_risks": "Should be NULL if is_internal=1",
      "example_values": ["cl_gmg_001", null]
    },
    {
      "canonical_field": "projects.is_internal",
      "source_table": "projects",
      "type": "INTEGER",
      "semantic_type": "boolean",
      "meaning": "1 if internal project (no client)",
      "allowed_values": [0, 1],
      "nullability": "NOT NULL",
      "default": 0,
      "aliases": [],
      "produced_by": ["manual", "enrollment_detector"],
      "consumed_by": ["normalizer", "gates"],
      "freshness": "on_enrollment",
      "quality_risks": "Must be consistent with client_id",
      "example_values": [0, 1]
    },
    {
      "canonical_field": "projects.name",
      "source_table": "projects",
      "type": "TEXT",
      "semantic_type": "display_name",
      "meaning": "Project display name",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["asana_collector", "manual"],
      "consumed_by": ["ui_display", "search"],
      "freshness": "on_sync",
      "quality_risks": "May be truncated from Asana",
      "example_values": ["GMG Ramadan Campaign 2026", "Internal: Website Redesign"]
    },
    {
      "canonical_field": "projects.type",
      "source_table": "projects",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Project vs retainer",
      "allowed_values": ["project", "retainer"],
      "nullability": "NOT NULL",
      "default": "project",
      "aliases": [],
      "produced_by": ["manual"],
      "consumed_by": ["delivery_engine"],
      "freshness": "static",
      "quality_risks": "None",
      "example_values": ["project", "retainer"]
    },
    {
      "canonical_field": "projects.status",
      "source_table": "projects",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Project lifecycle status",
      "allowed_values": ["active", "completed", "on_hold", "archived"],
      "nullability": "NULL",
      "default": "active",
      "aliases": [],
      "produced_by": ["asana_collector", "manual"],
      "consumed_by": ["delivery_engine", "filters"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["active", "completed"]
    },
    {
      "canonical_field": "projects.health",
      "source_table": "projects",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Project health indicator",
      "allowed_values": ["green", "yellow", "red"],
      "nullability": "NULL",
      "default": "green",
      "aliases": [],
      "produced_by": ["delivery_engine"],
      "consumed_by": ["heatstrip", "portfolio"],
      "freshness": "per_cycle",
      "quality_risks": "May not reflect reality if tasks stale",
      "example_values": ["green", "yellow", "red"]
    },
    {
      "canonical_field": "projects.deadline",
      "source_table": "projects",
      "type": "TEXT",
      "semantic_type": "iso_date",
      "meaning": "Project deadline",
      "allowed_values": "ISO date",
      "nullability": "NULL",
      "default": null,
      "aliases": ["target_end_date"],
      "produced_by": ["asana_collector", "manual"],
      "consumed_by": ["delivery_engine", "slip_risk"],
      "freshness": "on_sync",
      "quality_risks": "May be null for retainers",
      "example_values": ["2026-03-15", "2026-06-30"]
    },
    {
      "canonical_field": "projects.tasks_total",
      "source_table": "projects",
      "type": "INTEGER",
      "semantic_type": "count",
      "meaning": "Total task count",
      "allowed_values": ">= 0",
      "nullability": "NULL",
      "default": 0,
      "aliases": [],
      "produced_by": ["aggregator"],
      "consumed_by": ["progress_bars"],
      "freshness": "per_cycle",
      "quality_risks": "Cached, may lag",
      "example_values": [25, 100, 5]
    },
    {
      "canonical_field": "projects.tasks_done",
      "source_table": "projects",
      "type": "INTEGER",
      "semantic_type": "count",
      "meaning": "Completed task count",
      "allowed_values": ">= 0",
      "nullability": "NULL",
      "default": 0,
      "aliases": ["tasks_completed"],
      "produced_by": ["aggregator"],
      "consumed_by": ["progress_bars"],
      "freshness": "per_cycle",
      "quality_risks": "Cached, may lag",
      "example_values": [10, 85, 5]
    },
    {
      "canonical_field": "projects.completion_pct",
      "source_table": "projects",
      "type": "REAL",
      "semantic_type": "percentage",
      "meaning": "tasks_done / tasks_total * 100",
      "allowed_values": "0.0 to 100.0",
      "nullability": "NULL",
      "default": 0,
      "aliases": [],
      "produced_by": ["aggregator"],
      "consumed_by": ["progress_bars"],
      "freshness": "per_cycle",
      "quality_risks": "NaN if tasks_total=0",
      "example_values": [40.0, 85.0, 100.0]
    },
    {
      "canonical_field": "projects.days_to_deadline",
      "source_table": "projects",
      "type": "INTEGER",
      "semantic_type": "days",
      "meaning": "Days until deadline (negative if past)",
      "allowed_values": "integer",
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["delivery_engine"],
      "consumed_by": ["urgency_indicators"],
      "freshness": "per_cycle",
      "quality_risks": "Null if no deadline",
      "example_values": [14, 3, -2]
    },
    {
      "canonical_field": "tasks.id",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "uuid",
      "meaning": "Unique task identifier",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": ["task_id"],
      "produced_by": ["tasks_collector", "asana_collector"],
      "consumed_by": ["all_modules"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["gtask_abc123", "asana_xyz789"]
    },
    {
      "canonical_field": "tasks.source",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Origin system",
      "allowed_values": ["google_tasks", "asana", "manual", "v2_migration"],
      "nullability": "NOT NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["collectors"],
      "consumed_by": ["sync_logic"],
      "freshness": "on_create",
      "quality_risks": "None",
      "example_values": ["google_tasks", "asana"]
    },
    {
      "canonical_field": "tasks.source_id",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "external_id",
      "meaning": "ID in source system",
      "allowed_values": null,
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["collectors"],
      "consumed_by": ["sync_logic", "dedup"],
      "freshness": "on_create",
      "quality_risks": "None",
      "example_values": ["MTcxNzg5...", "1234567890123"]
    },
    {
      "canonical_field": "tasks.title",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "display_name",
      "meaning": "Task title",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": ["name"],
      "produced_by": ["collectors"],
      "consumed_by": ["ui_display", "search"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["Review contract", "Send invoice to GMG"]
    },
    {
      "canonical_field": "tasks.status",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Task lifecycle status",
      "allowed_values": ["active", "pending", "done", "blocked", "overdue", "completed", "archived"],
      "nullability": "NULL",
      "default": "active",
      "aliases": [],
      "produced_by": ["collectors", "status_engine"],
      "consumed_by": ["filters", "counts"],
      "freshness": "on_sync",
      "quality_risks": "Values may vary by source",
      "example_values": ["active", "done", "overdue"]
    },
    {
      "canonical_field": "tasks.project_id",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "fk",
      "meaning": "Associated project",
      "allowed_values": "Valid projects.id or NULL",
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["normalizer"],
      "consumed_by": ["delivery_engine"],
      "freshness": "per_cycle",
      "quality_risks": "May be null for unlinked tasks",
      "example_values": ["proj_asana_12345", null]
    },
    {
      "canonical_field": "tasks.brand_id",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "fk",
      "meaning": "Associated brand (derived from project)",
      "allowed_values": "Valid brands.id or NULL",
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["normalizer"],
      "consumed_by": ["filtering"],
      "freshness": "per_cycle",
      "quality_risks": "Derived field, depends on project chain",
      "example_values": ["brand_monoprix", null]
    },
    {
      "canonical_field": "tasks.client_id",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "fk",
      "meaning": "Associated client (derived from project→brand→client)",
      "allowed_values": "Valid clients.id or NULL",
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["normalizer"],
      "consumed_by": ["client360", "filtering"],
      "freshness": "per_cycle",
      "quality_risks": "Derived field, depends on chain integrity",
      "example_values": ["cl_gmg_001", null]
    },
    {
      "canonical_field": "tasks.project_link_status",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Project chain completeness status",
      "allowed_values": ["linked", "partial", "unlinked"],
      "nullability": "NULL",
      "default": "unlinked",
      "aliases": [],
      "produced_by": ["normalizer"],
      "consumed_by": ["gates", "resolution_queue"],
      "freshness": "per_cycle",
      "quality_risks": "None",
      "example_values": ["linked", "partial", "unlinked"]
    },
    {
      "canonical_field": "tasks.client_link_status",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Client chain completeness status",
      "allowed_values": ["linked", "unlinked", "n/a"],
      "nullability": "NULL",
      "default": "unlinked",
      "aliases": [],
      "produced_by": ["normalizer"],
      "consumed_by": ["gates", "resolution_queue"],
      "freshness": "per_cycle",
      "quality_risks": "n/a only valid for internal projects",
      "example_values": ["linked", "unlinked", "n/a"]
    },
    {
      "canonical_field": "tasks.assignee_id",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "fk",
      "meaning": "Assigned team member",
      "allowed_values": "Valid team_members.id or NULL",
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["normalizer"],
      "consumed_by": ["capacity_engine"],
      "freshness": "per_cycle",
      "quality_risks": "May not be resolved if assignee not in registry",
      "example_values": ["tm_ahmed_001", null]
    },
    {
      "canonical_field": "tasks.assignee_raw",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "display_name",
      "meaning": "Raw assignee name from source",
      "allowed_values": null,
      "nullability": "NULL",
      "default": null,
      "aliases": ["assignee"],
      "produced_by": ["collectors"],
      "consumed_by": ["team_registry_builder"],
      "freshness": "on_sync",
      "quality_risks": "Inconsistent naming",
      "example_values": ["Ahmed Salah", "Zeiad", "unassigned"]
    },
    {
      "canonical_field": "tasks.lane",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Work lane/category",
      "allowed_values": ["ops", "finance", "creative", "strategy", "tech", "admin"],
      "nullability": "NULL",
      "default": "ops",
      "aliases": [],
      "produced_by": ["lane_assigner"],
      "consumed_by": ["capacity_engine"],
      "freshness": "per_cycle",
      "quality_risks": "May default to 'ops' incorrectly",
      "example_values": ["ops", "finance", "creative"]
    },
    {
      "canonical_field": "tasks.due_date",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "iso_datetime",
      "meaning": "Task due date/time",
      "allowed_values": "ISO datetime or date",
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["collectors"],
      "consumed_by": ["urgency_calc", "overdue_detection"],
      "freshness": "on_sync",
      "quality_risks": "May be date-only from some sources",
      "example_values": ["2026-02-15", "2026-02-15T17:00:00"]
    },
    {
      "canonical_field": "tasks.duration_min",
      "source_table": "tasks",
      "type": "INTEGER",
      "semantic_type": "minutes",
      "meaning": "Estimated task duration in minutes",
      "allowed_values": "> 0",
      "nullability": "NULL",
      "default": 60,
      "aliases": ["effort_min"],
      "produced_by": ["task_duration_estimator", "manual"],
      "consumed_by": ["capacity_engine"],
      "freshness": "on_create_or_estimate",
      "quality_risks": "Default 60 may be inaccurate",
      "example_values": [30, 60, 120, 240]
    },
    {
      "canonical_field": "tasks.priority",
      "source_table": "tasks",
      "type": "INTEGER",
      "semantic_type": "score_0_100",
      "meaning": "Computed priority score",
      "allowed_values": "0 to 100",
      "nullability": "NULL",
      "default": 50,
      "aliases": [],
      "produced_by": ["collectors", "priority_engine"],
      "consumed_by": ["sorting", "filtering"],
      "freshness": "on_sync",
      "quality_risks": "May not reflect urgency accurately",
      "example_values": [85, 50, 30]
    },
    {
      "canonical_field": "tasks.urgency",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Urgency level",
      "allowed_values": ["low", "medium", "high", "critical"],
      "nullability": "NULL",
      "default": "medium",
      "aliases": [],
      "produced_by": ["collectors", "priority_engine"],
      "consumed_by": ["ui_badges"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["high", "medium", "critical"]
    },
    {
      "canonical_field": "tasks.impact",
      "source_table": "tasks",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Business impact level",
      "allowed_values": ["low", "medium", "high"],
      "nullability": "NULL",
      "default": "medium",
      "aliases": [],
      "produced_by": ["priority_engine"],
      "consumed_by": ["scoring"],
      "freshness": "per_cycle",
      "quality_risks": "Usually defaults to medium",
      "example_values": ["high", "medium", "low"]
    },
    {
      "canonical_field": "communications.id",
      "source_table": "communications",
      "type": "TEXT",
      "semantic_type": "uuid",
      "meaning": "Unique communication identifier",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": ["comm_id"],
      "produced_by": ["gmail_collector"],
      "consumed_by": ["commitments"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["gmail_abc123"]
    },
    {
      "canonical_field": "communications.from_email",
      "source_table": "communications",
      "type": "TEXT",
      "semantic_type": "email",
      "meaning": "Sender email address",
      "allowed_values": "valid email",
      "nullability": "NULL",
      "default": null,
      "aliases": ["from_address"],
      "produced_by": ["gmail_collector"],
      "consumed_by": ["client_identity_matching"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["john@gmg.ae", "contact@gargash.com"]
    },
    {
      "canonical_field": "communications.from_domain",
      "source_table": "communications",
      "type": "TEXT",
      "semantic_type": "domain",
      "meaning": "Sender email domain (derived)",
      "allowed_values": null,
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["normalizer"],
      "consumed_by": ["client_identity_matching"],
      "freshness": "per_cycle",
      "quality_risks": "None",
      "example_values": ["gmg.ae", "gargash.com"]
    },
    {
      "canonical_field": "communications.subject",
      "source_table": "communications",
      "type": "TEXT",
      "semantic_type": "display_name",
      "meaning": "Email subject line",
      "allowed_values": null,
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["gmail_collector"],
      "consumed_by": ["ui_display", "client_matching"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["Re: Contract Review", "Invoice #1234"]
    },
    {
      "canonical_field": "communications.body_text",
      "source_table": "communications",
      "type": "TEXT",
      "semantic_type": "text_blob",
      "meaning": "Full email body (HTML stripped)",
      "allowed_values": null,
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["gmail_collector"],
      "consumed_by": ["commitment_extractor"],
      "freshness": "on_sync",
      "quality_risks": "May be null if fetch failed; rate-limited",
      "example_values": ["Please find attached..."]
    },
    {
      "canonical_field": "communications.client_id",
      "source_table": "communications",
      "type": "TEXT",
      "semantic_type": "fk",
      "meaning": "Matched client (derived)",
      "allowed_values": "Valid clients.id or NULL",
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["normalizer"],
      "consumed_by": ["client360", "comms_command"],
      "freshness": "per_cycle",
      "quality_risks": "Only 12% linked due to limited identities",
      "example_values": ["cl_gmg_001", null]
    },
    {
      "canonical_field": "communications.link_status",
      "source_table": "communications",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Client link status",
      "allowed_values": ["linked", "unlinked"],
      "nullability": "NULL",
      "default": "unlinked",
      "aliases": [],
      "produced_by": ["normalizer"],
      "consumed_by": ["gates"],
      "freshness": "per_cycle",
      "quality_risks": "None",
      "example_values": ["linked", "unlinked"]
    },
    {
      "canonical_field": "communications.received_at",
      "source_table": "communications",
      "type": "TEXT",
      "semantic_type": "iso_datetime",
      "meaning": "Email received timestamp",
      "allowed_values": "ISO datetime",
      "nullability": "NULL",
      "default": null,
      "aliases": ["date"],
      "produced_by": ["gmail_collector"],
      "consumed_by": ["sorting", "age_calc"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["2026-02-04T10:30:00Z"]
    },
    {
      "canonical_field": "invoices.id",
      "source_table": "invoices",
      "type": "TEXT",
      "semantic_type": "uuid",
      "meaning": "Unique invoice identifier",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": ["invoice_id"],
      "produced_by": ["xero_collector"],
      "consumed_by": ["cash_ar_command"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["xero_INV-001"]
    },
    {
      "canonical_field": "invoices.external_id",
      "source_table": "invoices",
      "type": "TEXT",
      "semantic_type": "external_id",
      "meaning": "Invoice number from Xero",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": ["invoice_number"],
      "produced_by": ["xero_collector"],
      "consumed_by": ["ui_display"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["INV-001", "INV-002"]
    },
    {
      "canonical_field": "invoices.amount",
      "source_table": "invoices",
      "type": "REAL",
      "semantic_type": "currency",
      "meaning": "Invoice amount",
      "allowed_values": "> 0",
      "nullability": "NOT NULL",
      "default": null,
      "aliases": ["amount_due"],
      "produced_by": ["xero_collector"],
      "consumed_by": ["ar_totals"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": [50000.00, 125000.50]
    },
    {
      "canonical_field": "invoices.status",
      "source_table": "invoices",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Invoice lifecycle status",
      "allowed_values": ["draft", "sent", "paid", "overdue", "void"],
      "nullability": "NOT NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["xero_collector"],
      "consumed_by": ["ar_filters"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["sent", "overdue", "paid"]
    },
    {
      "canonical_field": "invoices.aging_bucket",
      "source_table": "invoices",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "AR aging bucket (derived)",
      "allowed_values": ["current", "1-30", "31-60", "61-90", "90+"],
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["normalizer"],
      "consumed_by": ["cash_ar_command", "waterfall"],
      "freshness": "per_cycle",
      "quality_risks": "Only set for valid AR invoices",
      "example_values": ["current", "1-30", "90+"]
    },
    {
      "canonical_field": "invoices.due_date",
      "source_table": "invoices",
      "type": "TEXT",
      "semantic_type": "iso_date",
      "meaning": "Invoice due date",
      "allowed_values": "ISO date",
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["xero_collector"],
      "consumed_by": ["aging_calc"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["2026-02-15", "2026-01-01"]
    },
    {
      "canonical_field": "commitments.id",
      "source_table": "commitments",
      "type": "TEXT",
      "semantic_type": "uuid",
      "meaning": "Unique commitment identifier",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": "random",
      "aliases": ["commitment_id"],
      "produced_by": ["commitment_extractor"],
      "consumed_by": ["comms_command"],
      "freshness": "on_extraction",
      "quality_risks": "None",
      "example_values": ["comm_abc123"]
    },
    {
      "canonical_field": "commitments.text",
      "source_table": "commitments",
      "type": "TEXT",
      "semantic_type": "display_text",
      "meaning": "The commitment text",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["commitment_extractor"],
      "consumed_by": ["ui_display"],
      "freshness": "on_extraction",
      "quality_risks": "Quality depends on extraction",
      "example_values": ["Will send the report by Friday"]
    },
    {
      "canonical_field": "commitments.type",
      "source_table": "commitments",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Promise (we made) vs request (they made)",
      "allowed_values": ["promise", "request"],
      "nullability": "NOT NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["commitment_extractor"],
      "consumed_by": ["ui_badges"],
      "freshness": "on_extraction",
      "quality_risks": "None",
      "example_values": ["promise", "request"]
    },
    {
      "canonical_field": "commitments.status",
      "source_table": "commitments",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Commitment lifecycle status",
      "allowed_values": ["open", "fulfilled", "broken", "cancelled"],
      "nullability": "NULL",
      "default": "open",
      "aliases": [],
      "produced_by": ["manual", "tracking"],
      "consumed_by": ["comms_command"],
      "freshness": "manual",
      "quality_risks": "Requires manual status updates",
      "example_values": ["open", "fulfilled", "broken"]
    },
    {
      "canonical_field": "resolution_queue.id",
      "source_table": "resolution_queue",
      "type": "TEXT",
      "semantic_type": "uuid",
      "meaning": "Unique queue item identifier",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": "random",
      "aliases": [],
      "produced_by": ["resolution_queue_engine"],
      "consumed_by": ["queue_ui"],
      "freshness": "per_cycle",
      "quality_risks": "None",
      "example_values": ["rq_abc123"]
    },
    {
      "canonical_field": "resolution_queue.entity_type",
      "source_table": "resolution_queue",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Type of entity with issue",
      "allowed_values": ["task", "project", "client", "communication", "invoice"],
      "nullability": "NOT NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["resolution_queue_engine"],
      "consumed_by": ["queue_ui"],
      "freshness": "on_create",
      "quality_risks": "None",
      "example_values": ["task", "project"]
    },
    {
      "canonical_field": "resolution_queue.issue_type",
      "source_table": "resolution_queue",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Type of issue detected",
      "allowed_values": ["missing_project", "missing_client", "overdue", "blocked", "stale", "unlinked_comm"],
      "nullability": "NOT NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["resolution_queue_engine"],
      "consumed_by": ["queue_ui"],
      "freshness": "on_create",
      "quality_risks": "None",
      "example_values": ["missing_project", "overdue"]
    },
    {
      "canonical_field": "resolution_queue.priority",
      "source_table": "resolution_queue",
      "type": "INTEGER",
      "semantic_type": "priority_1_5",
      "meaning": "Issue priority (1=highest)",
      "allowed_values": [1, 2, 3, 4, 5],
      "nullability": "NOT NULL",
      "default": 2,
      "aliases": [],
      "produced_by": ["resolution_queue_engine"],
      "consumed_by": ["sorting"],
      "freshness": "on_create",
      "quality_risks": "None",
      "example_values": [1, 2, 3]
    },
    {
      "canonical_field": "team_members.id",
      "source_table": "team_members",
      "type": "TEXT",
      "semantic_type": "uuid",
      "meaning": "Unique team member identifier",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": ["member_id"],
      "produced_by": ["team_registry_builder"],
      "consumed_by": ["tasks", "capacity"],
      "freshness": "on_build",
      "quality_risks": "None",
      "example_values": ["tm_ahmed_001"]
    },
    {
      "canonical_field": "team_members.name",
      "source_table": "team_members",
      "type": "TEXT",
      "semantic_type": "display_name",
      "meaning": "Team member name",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["team_registry_builder"],
      "consumed_by": ["ui_display"],
      "freshness": "on_build",
      "quality_risks": "None",
      "example_values": ["Ahmed Salah", "Zeiad"]
    },
    {
      "canonical_field": "events.id",
      "source_table": "events",
      "type": "TEXT",
      "semantic_type": "uuid",
      "meaning": "Unique event identifier",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": ["event_id"],
      "produced_by": ["calendar_collector"],
      "consumed_by": ["calendar_ui"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["calendar_abc123"]
    },
    {
      "canonical_field": "events.title",
      "source_table": "events",
      "type": "TEXT",
      "semantic_type": "display_name",
      "meaning": "Event title",
      "allowed_values": null,
      "nullability": "NOT NULL",
      "default": null,
      "aliases": ["summary"],
      "produced_by": ["calendar_collector"],
      "consumed_by": ["ui_display"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["Team Standup", "Client Call: GMG"]
    },
    {
      "canonical_field": "events.start_time",
      "source_table": "events",
      "type": "TEXT",
      "semantic_type": "iso_datetime",
      "meaning": "Event start timestamp",
      "allowed_values": "ISO datetime",
      "nullability": "NOT NULL",
      "default": null,
      "aliases": ["start"],
      "produced_by": ["calendar_collector"],
      "consumed_by": ["calendar_ui", "capacity"],
      "freshness": "on_sync",
      "quality_risks": "None",
      "example_values": ["2026-02-04T10:00:00"]
    },
    {
      "canonical_field": "sync_state.source",
      "source_table": "sync_state",
      "type": "TEXT",
      "semantic_type": "enum",
      "meaning": "Collector name",
      "allowed_values": ["tasks", "calendar", "gmail", "asana", "xero"],
      "nullability": "NOT NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["collectors"],
      "consumed_by": ["freshness_indicators"],
      "freshness": "per_sync",
      "quality_risks": "None",
      "example_values": ["tasks", "gmail"]
    },
    {
      "canonical_field": "sync_state.last_sync",
      "source_table": "sync_state",
      "type": "TEXT",
      "semantic_type": "iso_datetime",
      "meaning": "Last sync attempt timestamp",
      "allowed_values": "ISO datetime",
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["collectors"],
      "consumed_by": ["freshness_indicators"],
      "freshness": "per_sync",
      "quality_risks": "None",
      "example_values": ["2026-02-04T17:00:00Z"]
    },
    {
      "canonical_field": "sync_state.error",
      "source_table": "sync_state",
      "type": "TEXT",
      "semantic_type": "error_message",
      "meaning": "Last error message if sync failed",
      "allowed_values": null,
      "nullability": "NULL",
      "default": null,
      "aliases": [],
      "produced_by": ["collectors"],
      "consumed_by": ["error_alerts"],
      "freshness": "per_sync",
      "quality_risks": "None",
      "example_values": [null, "Connection timeout"]
    }
  ],
  "derived_fields": [
    {
      "canonical_field": "snapshot.slip_risk_score",
      "source": "delivery_engine",
      "type": "REAL",
      "semantic_type": "score_0_1",
      "meaning": "Computed project slip risk",
      "formula": "0.35*deadline_pressure + 0.25*remaining_work_ratio + 0.25*capacity_gap_ratio + 0.15*blocking_severity",
      "inputs": ["projects.deadline", "tasks.status", "tasks.duration_min", "tasks.blocked"],
      "consumed_by": ["heatstrip", "narrative"],
      "freshness": "per_snapshot",
      "quality_risks": "Requires accurate task estimates"
    },
    {
      "canonical_field": "snapshot.base_score",
      "source": "scoring_engine",
      "type": "REAL",
      "semantic_type": "score_0_1",
      "meaning": "Base score for ranking items",
      "formula": "0.30*impact + 0.30*urgency + 0.20*controllability + 0.20*confidence_scalar",
      "inputs": ["impact", "urgency", "controllability", "confidence"],
      "consumed_by": ["ranking"],
      "freshness": "per_snapshot",
      "quality_risks": "Weights are locked per spec"
    },
    {
      "canonical_field": "snapshot.mode_weighted_score",
      "source": "scoring_engine",
      "type": "REAL",
      "semantic_type": "score_0_1",
      "meaning": "Score weighted by mode (Ops Head/Co-Founder/Artist)",
      "formula": "base_score * domain_weight(mode, domain)",
      "inputs": ["base_score", "mode", "domain"],
      "consumed_by": ["ranking", "first_to_break"],
      "freshness": "per_snapshot",
      "quality_risks": "None"
    },
    {
      "canonical_field": "snapshot.client_health_score",
      "source": "client360_engine",
      "type": "REAL",
      "semantic_type": "score_0_100",
      "meaning": "Composite client health score",
      "formula": "weighted_avg(delivery_score, finance_score, responsiveness_score, commitments_score, capacity_score)",
      "inputs": ["projects", "invoices", "communications", "commitments", "tasks"],
      "consumed_by": ["client360", "tiles"],
      "freshness": "per_snapshot",
      "quality_risks": "Requires linked data for accuracy"
    },
    {
      "canonical_field": "snapshot.ar_total",
      "source": "cash_ar_engine",
      "type": "REAL",
      "semantic_type": "currency_aed",
      "meaning": "Total outstanding AR",
      "formula": "SUM(invoices.amount) WHERE status IN ('sent','overdue') AND paid_date IS NULL",
      "inputs": ["invoices.amount", "invoices.status", "invoices.paid_date"],
      "consumed_by": ["tiles", "cash_ar_command"],
      "freshness": "per_snapshot",
      "quality_risks": "None"
    },
    {
      "canonical_field": "snapshot.time_to_consequence_hours",
      "source": "delivery_engine",
      "type": "REAL",
      "semantic_type": "hours",
      "meaning": "Hours until negative consequence",
      "formula": "Computed from due dates, blocking status, and dependency chain",
      "inputs": ["tasks.due_date", "tasks.status", "projects.deadline"],
      "consumed_by": ["first_to_break", "eligibility"],
      "freshness": "per_snapshot",
      "quality_risks": "Requires accurate due dates"
    }
  ]
}
