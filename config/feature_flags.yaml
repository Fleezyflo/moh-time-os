# Feature Flags for Time OS Tier Activation
# Each tier is locked until the previous tier is stable

feature_flags:
  tier_0_time:
    name: "Time Truth"
    status: active
    description: "Core scheduling - tasks, blocks, calendar"
    unlocked_at: "2026-02-02"
    
  tier_1_commitment:
    name: "Commitment Truth"
    status: locked
    description: "Promise tracking from emails"
    requires:
      - tier_0_time.stable_days >= 7
    unlock_criteria:
      - "Time Truth stable for 7 consecutive days"
      - "No scheduling validation errors"
      - "Calendar sync 95%+ success rate"
    
  tier_2_capacity:
    name: "Capacity Truth"
    status: locked
    description: "Lane capacity and debt tracking"
    requires:
      - tier_1_commitment.stable_days >= 7
    unlock_criteria:
      - "Commitment Truth stable for 7 days"
      - "Tasks have lane assignments"
    
  tier_3_client:
    name: "Client Truth"
    status: locked
    description: "Client health computation"
    requires:
      - tier_2_capacity.stable_days >= 7
    unlock_criteria:
      - "Capacity Truth stable for 7 days"
      - "Client-task links populated"
    
  tier_4_finance:
    name: "Financial Truth"
    status: locked
    description: "AR aging and financial alerts"
    requires:
      - tier_3_client.stable_days >= 7
    unlock_criteria:
      - "Client Truth stable for 7 days"
      - "Xero sync operational"

# Stability tracking
stability:
  check_frequency: daily
  criteria:
    - "No invariant violations"
    - "No sync failures > 1 hour"
    - "No manual intervention required"
  tracking_table: tier_stability
