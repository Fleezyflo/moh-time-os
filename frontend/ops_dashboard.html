<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOH TIME OS â€” Operations Intelligence</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.5.1" crossorigin="anonymous"></script>
    <style>
        :root {
            --bg:#0a0e17;--surface:#111827;--surface-2:#1a2332;--border:#1f2937;
            --text:#e5e7eb;--dim:#9ca3af;--accent:#3b82f6;--green:#10b981;
            --red:#ef4444;--amber:#f59e0b;--purple:#8b5cf6;--radius:12px;
        }
        *{margin:0;padding:0;box-sizing:border-box;}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;}
        .dashboard{max-width:1440px;margin:0 auto;padding:24px;}
        header{display:flex;justify-content:space-between;align-items:center;margin-bottom:28px;padding-bottom:20px;border-bottom:1px solid var(--border);}
        .logo{display:flex;align-items:center;gap:14px;}
        .logo-mark{width:40px;height:40px;background:linear-gradient(135deg,var(--green),var(--accent));border-radius:10px;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:14px;color:white;}
        h1{font-size:22px;font-weight:700;letter-spacing:-0.5px;}
        .subtitle{color:var(--dim);font-size:13px;margin-top:2px;}
        .nav{display:flex;gap:6px;margin-bottom:24px;}
        .nav a{padding:8px 16px;border-radius:8px;color:var(--dim);text-decoration:none;font-size:13px;font-weight:500;border:1px solid transparent;}
        .nav a:hover{color:var(--text);border-color:var(--border);}
        .nav a.active{background:rgba(59,130,246,0.1);border-color:var(--accent);color:var(--accent);font-weight:600;}

        .grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:24px;}
        .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:24px;}
        .grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px;}
        .card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:20px;}
        .card-title{font-size:14px;font-weight:600;margin-bottom:16px;display:flex;justify-content:space-between;align-items:center;}
        .mini-stat{text-align:center;padding:16px;}
        .mini-stat .val{font-size:32px;font-weight:800;letter-spacing:-1px;}
        .mini-stat .label{font-size:11px;color:var(--dim);text-transform:uppercase;letter-spacing:0.5px;margin-top:4px;}
        .mini-stat .sub{font-size:12px;margin-top:6px;}

        /* Status indicators */
        .status-pill{display:inline-flex;align-items:center;gap:5px;padding:3px 10px;border-radius:16px;font-size:11px;font-weight:600;}
        .pill-green{background:rgba(16,185,129,0.15);color:var(--green);}
        .pill-amber{background:rgba(245,158,11,0.15);color:var(--amber);}
        .pill-red{background:rgba(239,68,68,0.15);color:var(--red);}
        .pill-blue{background:rgba(59,130,246,0.15);color:var(--accent);}

        /* Circuit breaker viz */
        .cb-row{display:flex;align-items:center;gap:12px;padding:10px 0;border-bottom:1px solid var(--border);}
        .cb-row:last-child{border:none;}
        .cb-name{flex:1;font-size:13px;font-weight:500;}
        .cb-state{width:80px;text-align:center;}
        .cb-bar{flex:2;height:6px;background:var(--surface-2);border-radius:3px;overflow:hidden;}
        .cb-fill{height:100%;border-radius:3px;transition:width 0.3s;}

        /* Log entries */
        .log{max-height:300px;overflow-y:auto;font-family:'SF Mono',Monaco,Consolas,monospace;font-size:12px;line-height:1.8;}
        .log-entry{padding:2px 0;display:flex;gap:10px;}
        .log-time{color:var(--dim);min-width:80px;}
        .log-level{min-width:50px;font-weight:600;}
        .log-level.info{color:var(--accent);}
        .log-level.warn{color:var(--amber);}
        .log-level.err{color:var(--red);}
        .log-level.ok{color:var(--green);}
        .log-msg{color:var(--text);}

        /* Rate limit bars */
        .rl-row{display:flex;align-items:center;gap:12px;padding:8px 0;}
        .rl-label{width:80px;font-size:12px;color:var(--dim);}
        .rl-bar-bg{flex:1;height:8px;background:var(--surface-2);border-radius:4px;overflow:hidden;}
        .rl-bar{height:100%;border-radius:4px;}
        .rl-val{width:60px;text-align:right;font-size:12px;font-variant-numeric:tabular-nums;}

        /* Perf table */
        .perf-row{display:grid;grid-template-columns:2fr 1fr 1fr 1fr 1fr;padding:8px 0;border-bottom:1px solid var(--border);font-size:13px;align-items:center;}
        .perf-row.header{color:var(--dim);font-size:11px;text-transform:uppercase;letter-spacing:0.5px;font-weight:500;}

        @media(max-width:1024px){.grid-2,.grid-3,.grid-4{grid-template-columns:1fr;}}
    </style>
</head>
<body>
<div class="dashboard">
    <header>
        <div class="logo">
            <div class="logo-mark">OPS</div>
            <div>
                <h1>Operations Intelligence</h1>
                <div class="subtitle">Autonomous Loop Â· Security Â· Performance Â· Governance</div>
            </div>
        </div>
    </header>

    <nav class="nav">
        <a href="command_center.html">Command Center</a>
        <a href="ops_dashboard.html" class="active">Operations</a>
        <a href="governance_console.html">Governance</a>
        <a href="conversational_ui.html">Ask</a>
    </nav>

    <!-- Autonomous Operations -->
    <h2 style="font-size:16px;margin-bottom:16px;color:var(--accent);">âš¡ Autonomous Operations (Brief 10)</h2>
    <div class="grid-4">
        <div class="card mini-stat">
            <div class="val" style="color:var(--green);">HEALTHY</div>
            <div class="label">System Status</div>
            <div class="sub"><span class="status-pill pill-green">All circuits closed</span></div>
        </div>
        <div class="card mini-stat">
            <div class="val">247</div>
            <div class="label">Cycles Completed</div>
            <div class="sub" style="color:var(--dim)">Last 24h</div>
        </div>
        <div class="card mini-stat">
            <div class="val" style="color:var(--green);">99.2%</div>
            <div class="label">Success Rate</div>
            <div class="sub" style="color:var(--dim)">2 failures in 247 cycles</div>
        </div>
        <div class="card mini-stat">
            <div class="val">0</div>
            <div class="label">Active Breakers</div>
            <div class="sub" style="color:var(--dim)">0 tripped today</div>
        </div>
    </div>

    <div class="grid-2">
        <div class="card">
            <div class="card-title">Circuit Breakers</div>
            <div class="cb-row">
                <div class="cb-name">Email Collector</div>
                <span class="status-pill pill-green">CLOSED</span>
                <div class="cb-bar"><div class="cb-fill" style="width:0%;background:var(--green);"></div></div>
                <div style="font-size:12px;color:var(--dim);width:80px;text-align:right;">0 failures</div>
            </div>
            <div class="cb-row">
                <div class="cb-name">Calendar Sync</div>
                <span class="status-pill pill-green">CLOSED</span>
                <div class="cb-bar"><div class="cb-fill" style="width:0%;background:var(--green);"></div></div>
                <div style="font-size:12px;color:var(--dim);width:80px;text-align:right;">0 failures</div>
            </div>
            <div class="cb-row">
                <div class="cb-name">Xero Invoice Sync</div>
                <span class="status-pill pill-green">CLOSED</span>
                <div class="cb-bar"><div class="cb-fill" style="width:33%;background:var(--amber);"></div></div>
                <div style="font-size:12px;color:var(--dim);width:80px;text-align:right;">1 failure</div>
            </div>
            <div class="cb-row">
                <div class="cb-name">Asana Task Sync</div>
                <span class="status-pill pill-green">CLOSED</span>
                <div class="cb-bar"><div class="cb-fill" style="width:0%;background:var(--green);"></div></div>
                <div style="font-size:12px;color:var(--dim);width:80px;text-align:right;">0 failures</div>
            </div>
            <div class="cb-row">
                <div class="cb-name">Intelligence Engine</div>
                <span class="status-pill pill-green">CLOSED</span>
                <div class="cb-bar"><div class="cb-fill" style="width:0%;background:var(--green);"></div></div>
                <div style="font-size:12px;color:var(--dim);width:80px;text-align:right;">0 failures</div>
            </div>
            <div class="cb-row">
                <div class="cb-name">Signal Detection</div>
                <span class="status-pill pill-green">CLOSED</span>
                <div class="cb-bar"><div class="cb-fill" style="width:66%;background:var(--amber);"></div></div>
                <div style="font-size:12px;color:var(--dim);width:80px;text-align:right;">2 failures</div>
            </div>
        </div>
        <div class="card">
            <div class="card-title">Recent Operations Log</div>
            <div class="log">
                <div class="log-entry"><span class="log-time">14:32:01</span><span class="log-level ok">OK</span><span class="log-msg">Cycle #247 completed â€” 6/6 jobs succeeded (1.2s)</span></div>
                <div class="log-entry"><span class="log-time">14:17:01</span><span class="log-level ok">OK</span><span class="log-msg">Cycle #246 completed â€” 6/6 jobs succeeded (1.4s)</span></div>
                <div class="log-entry"><span class="log-time">14:02:01</span><span class="log-level warn">WARN</span><span class="log-msg">Signal Detection: timeout after 30s, retry 1/3</span></div>
                <div class="log-entry"><span class="log-time">14:02:05</span><span class="log-level ok">OK</span><span class="log-msg">Signal Detection: retry succeeded (2.1s)</span></div>
                <div class="log-entry"><span class="log-time">13:47:01</span><span class="log-level ok">OK</span><span class="log-msg">Cycle #244 completed â€” 6/6 jobs succeeded (1.1s)</span></div>
                <div class="log-entry"><span class="log-time">13:32:01</span><span class="log-level ok">OK</span><span class="log-msg">Cycle #243 completed â€” 6/6 jobs succeeded (0.9s)</span></div>
                <div class="log-entry"><span class="log-time">12:47:01</span><span class="log-level warn">WARN</span><span class="log-msg">Xero Invoice Sync: rate limit hit, backoff 2.0s</span></div>
                <div class="log-entry"><span class="log-time">12:47:04</span><span class="log-level ok">OK</span><span class="log-msg">Xero Invoice Sync: retry succeeded (3.2s)</span></div>
                <div class="log-entry"><span class="log-time">12:32:01</span><span class="log-level ok">OK</span><span class="log-msg">Cycle #240 completed â€” 6/6 jobs succeeded (1.3s)</span></div>
                <div class="log-entry"><span class="log-time">11:02:01</span><span class="log-level err">ERR</span><span class="log-msg">Signal Detection: connection reset, circuit at 2/3 threshold</span></div>
            </div>
        </div>
    </div>

    <!-- Security -->
    <h2 style="font-size:16px;margin:28px 0 16px;color:var(--purple);">ðŸ”’ Security Hardening (Brief 13)</h2>
    <div class="grid-3">
        <div class="card">
            <div class="card-title">API Keys</div>
            <div style="display:flex;flex-direction:column;gap:10px;">
                <div style="display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background:var(--surface-2);border-radius:8px;">
                    <div><div style="font-size:13px;font-weight:500;">Production API</div><div style="font-size:11px;color:var(--dim);">admin Â· moh_sk_****7f2a</div></div>
                    <span class="status-pill pill-green">Active</span>
                </div>
                <div style="display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background:var(--surface-2);border-radius:8px;">
                    <div><div style="font-size:13px;font-weight:500;">Dashboard Read</div><div style="font-size:11px;color:var(--dim);">viewer Â· moh_sk_****3e1b</div></div>
                    <span class="status-pill pill-green">Active</span>
                </div>
                <div style="display:flex;justify-content:space-between;align-items:center;padding:8px 12px;background:var(--surface-2);border-radius:8px;">
                    <div><div style="font-size:13px;font-weight:500;">CI/CD Pipeline</div><div style="font-size:11px;color:var(--dim);">operator Â· moh_sk_****9d4c</div></div>
                    <span class="status-pill pill-green">Active</span>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-title">Rate Limiting</div>
            <div class="rl-row">
                <div class="rl-label">Admin</div>
                <div class="rl-bar-bg"><div class="rl-bar" style="width:23%;background:var(--green);"></div></div>
                <div class="rl-val">28/120</div>
            </div>
            <div class="rl-row">
                <div class="rl-label">Operator</div>
                <div class="rl-bar-bg"><div class="rl-bar" style="width:45%;background:var(--amber);"></div></div>
                <div class="rl-val">27/60</div>
            </div>
            <div class="rl-row">
                <div class="rl-label">Viewer</div>
                <div class="rl-bar-bg"><div class="rl-bar" style="width:60%;background:var(--amber);"></div></div>
                <div class="rl-val">18/30</div>
            </div>
            <div style="font-size:11px;color:var(--dim);margin-top:12px;">Sliding window Â· per minute</div>
        </div>
        <div class="card">
            <div class="card-title">Security Headers</div>
            <div style="font-size:13px;line-height:2;">
                <div>âœ… Content-Security-Policy</div>
                <div>âœ… X-Frame-Options: DENY</div>
                <div>âœ… X-Content-Type-Options: nosniff</div>
                <div>âœ… HSTS (1 year)</div>
                <div>âœ… Referrer-Policy: strict-origin</div>
                <div>âœ… CORS: restricted origins</div>
            </div>
        </div>
    </div>

    <!-- Performance -->
    <h2 style="font-size:16px;margin:28px 0 16px;color:var(--amber);">âš¡ Performance & Scale (Brief 14)</h2>
    <div class="grid-2">
        <div class="card">
            <div class="card-title">Cache Performance <span class="status-pill pill-green">87% hit rate</span></div>
            <canvas id="cacheChart" height="180"></canvas>
        </div>
        <div class="card">
            <div class="card-title">Endpoint Baselines (p95 ms)</div>
            <div class="perf-row header">
                <div>Endpoint</div><div>Target</div><div>p50</div><div>p95</div><div>Status</div>
            </div>
            <div class="perf-row">
                <div>/portfolio/overview</div><div>200ms</div><div style="color:var(--green)">85ms</div><div style="color:var(--green)">142ms</div><div><span class="status-pill pill-green">âœ“</span></div>
            </div>
            <div class="perf-row">
                <div>/briefing</div><div>500ms</div><div style="color:var(--green)">220ms</div><div style="color:var(--green)">380ms</div><div><span class="status-pill pill-green">âœ“</span></div>
            </div>
            <div class="perf-row">
                <div>/snapshot</div><div>2000ms</div><div style="color:var(--amber)">1200ms</div><div style="color:var(--amber)">1850ms</div><div><span class="status-pill pill-amber">~</span></div>
            </div>
            <div class="perf-row">
                <div>/signals</div><div>300ms</div><div style="color:var(--green)">95ms</div><div style="color:var(--green)">210ms</div><div><span class="status-pill pill-green">âœ“</span></div>
            </div>
            <div class="perf-row">
                <div>/proposals</div><div>500ms</div><div style="color:var(--green)">180ms</div><div style="color:var(--green)">340ms</div><div><span class="status-pill pill-green">âœ“</span></div>
            </div>
            <div class="perf-row">
                <div>/scores/record</div><div>1000ms</div><div style="color:var(--green)">450ms</div><div style="color:var(--green)">720ms</div><div><span class="status-pill pill-green">âœ“</span></div>
            </div>
        </div>
    </div>
</div>

<script>
Chart.defaults.color='#9ca3af';Chart.defaults.borderColor='#1f2937';
// Cache performance over time
new Chart(document.getElementById('cacheChart'),{
    type:'line',
    data:{
        labels:['00:00','04:00','08:00','12:00','16:00','20:00','Now'],
        datasets:[
            {label:'Hit Rate %',data:[82,85,88,91,87,85,87],borderColor:'#10b981',backgroundColor:'rgba(16,185,129,0.1)',fill:true,tension:0.4,pointRadius:3},
            {label:'Entries',data:[450,420,680,820,750,700,720],borderColor:'#3b82f6',backgroundColor:'rgba(59,130,246,0.1)',fill:true,tension:0.4,pointRadius:3,yAxisID:'y1'},
        ]
    },
    options:{
        responsive:true,maintainAspectRatio:false,
        interaction:{mode:'index',intersect:false},
        scales:{
            y:{beginAtZero:true,max:100,grid:{color:'#1f2937'},ticks:{callback:v=>v+'%'}},
            y1:{position:'right',beginAtZero:true,grid:{display:false}},
            x:{grid:{color:'#1f2937'}}
        },
        plugins:{legend:{position:'bottom',labels:{padding:12,usePointStyle:true,pointStyle:'circle',color:'#9ca3af'}}}
    }
});
</script>
</body>
</html>
